# os
计算机(冯·诺依曼体系结构)组成:
- 硬件

  由cpu(控制器+运算器), 存储(内存+外存), i/o组成.
- 软件
  
  - 系统软件: os, 编译器等
  - 应用软件

![Linux操作系统层次结构](/misc/img/os/20190430163149125_TYWCZD.jpg)

os: 为上层软件提供抽象, 管理计算机硬件与软件资源的系统软件.

> 抽象是管理复杂性的一个关键, 比如类nix的一切皆是文件.
> os的资源管理采用两种方法实现多路复用: 1. 时间上, 比如时间分片,共享打印机; 2. 空间, 比如进程空间.
> io设备 = 设备控制器 + 设备本身.

`count = read(fd, buffer, nbytes)`:
![系统调用](/misc/img/os/system_call.png)

![](/misc/img/os/1920px-OS-structure2.png)
os分类:
- 宏内核 : 所有的模块都在同一个内核空间上运行
- 微内核 : 将许多OS服务放入分离的进程，如文件系统，设备驱动程序，而进程通过消息传递调用OS服务.
- 混合内核

中断：在计算机执行程序的过程中，当出现异常情况或者特殊请求时，计算机停止现行的程序的运行，转而对这些异常处理或者特殊请求的处理，处理结束后再返回到现行程序的中断处，继续执行原程序.
中断向量（Interrupt vector, 向量即指针）是中断服务程序的入口地址.

忙等待(busy waiting): 连续测试一个变量直到某个值出现为止.
自旋锁(spin lock): 用于忙等待的锁. 线程反复检查锁变量是否可用. 由于线程在这一过程中保持执行，因此是一种忙等待. 一旦获取了自旋锁，线程会一直保持该锁，直至显式释放自旋锁. 读写自旋锁的存储内存或寄存器的操作必须是原子的, 通常用test-and-set等原子操作来实现.