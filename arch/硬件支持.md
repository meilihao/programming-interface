# 硬件支持
linux对硬件的识别是以芯片组的厂商为依据的.

### /proc/cpuinfo
参考:
- [How does /proc/cpuinfo detect the CPU model](https://unix.stackexchange.com/questions/400168/how-does-proc-cpuinfo-detect-the-cpu-model)
- [英特尔® 处理器命名规范](https://www.intel.cn/content/www/cn/zh/processors/processor-numbers.html)

model name:
```c
// from https://en.wikipedia.org/wiki/CPUID#EAX.3D80000002h.2C80000003h.2C80000004h:_Processor_Brand_String
// https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/x86/kernel/cpu/common.c#n528
#include <cpuid.h>  // GCC-provided
#include <stdio.h>
#include <stdint.h>

int main(void) {
    uint32_t brand[64];

    if (!__get_cpuid_max(0x80000004, NULL)) {
        fprintf(stderr, "Feature not implemented.");
        return 2;
    }

    __get_cpuid(0x80000002, brand+0x0, brand+0x1, brand+0x2, brand+0x3);
    __get_cpuid(0x80000003, brand+0x4, brand+0x5, brand+0x6, brand+0x7);
    __get_cpuid(0x80000004, brand+0x8, brand+0x9, brand+0xa, brand+0xb);
    printf("Brand: %s\n", brand);
}
```

> lscpu是依赖`/proc/cpuinfo`获取cpu信息的.
> 飞腾cpu未找到cpuid资料.

`Xeon E3-1220 [x] v6`命名规范:
- Xeon分为E3, E5, E7系列，跟消费级的i3, i5, i7类似，分别代表了3个不同档次的cpu
- 1220
    1. 第1位`1`代表了cpu的最大并行路数，就是一块主板上能插多少个CPU. 如Xeon E5-2428L v3的就是双路cpu
    1. 第2位`2`代表cpu接口封装代号
    1. 第3-4位`2`代表cpu编号
- 可选的标志: 如`Xeon E3-1501L v6`中的L指的是低功耗版本
- `v6`表示版本


## 网络设备
`/lib/modules/$(uname -r)/kernel/drivers/net`列出了kernel支持的所有网络设备, 比如以太网设备, 虚拟化网络设备, 无线网络设备等, 目录划分:
- `ethernet` : 所有支持的以太网卡设备, 每个厂商下包含若干芯片, 最终的`.ko`文件即为网卡芯片对应的驱动程序.

## 概念
1. 双控

    一个服务器上有两个节点, 每个节点有自己的cpu/内存/系统盘. 它们使用相同的硬盘背板来共享存储整列或连接到同一个存储阵列上共享存储.